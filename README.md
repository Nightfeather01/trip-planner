# 兼具多目標考量的全方位旅遊規劃服務

## 📋 專案概述

本專題旨在開發一個基於網頁的智能旅遊規劃服務系統。系統能夠自動挑選景點並規劃完整旅程,同時考量多個目標(如時間、預算、景點評價等),並透過規劃大眾運輸路線降低碳排放。

**指導教授:** 林楚迪 老師  
**學生:** 龐宸業、劉宗翰
**年度:** 113學年度

## 🎯 研究動機

- COVID-19疫情後旅遊需求回溫,但市場缺乏自動規劃景點及旅程的智能服務
- 現有應用(如Funliday、去趣)僅提供手動規劃或簡單的最短路徑規劃
- 缺乏對景點營業時間、使用者個別需求的細緻考量

## ✨ 核心特色

### 1. 多目標最佳化
- **行程總距離最小化**
- **景點拜訪時間合理性** (考量營業時間,避免將夜市排在早晨)
- **景點類型數量分配合理性** (避免行程全為同類型景點)
- **景點評價與價格水平最佳化**

### 2. 智能演算法
採用 **NSGA-II** (Non-dominated Sorting Genetic Algorithm II) 演算法:
- 高效的非支配排序機制
- 精英策略確保優質解不流失
- 擁擠度排序維持解的多樣性

### 3. 初始群集生成策略
結合四種策略生成高品質初始群集:
- **貪婪策略** (Greedy Strategy): 快速生成高品質解
- **隨機策略** (Random Strategy): 探索更大解空間
- **時間槽策略** (Time Slot Strategy): 符合時間約束
- **分群策略** (Cluster Strategy): 提升景點組合合理性

## 🏗️ 系統架構

採用四層式分層架構設計:

```
外部介面層 (External Interface Layer)
├─ Apache Configuration
├─ WSGI Middleware Stack
└─ Session Management

應用程式層 (Application Layer)
├─ 使用者管理模組 (user_bp)
└─ 行程規劃模組 (trip_plan_bp)

服務層 (Service Layer)
├─ FormService (表單驗證與轉換)
├─ PreferenceService (偏好設定管理)
├─ PlaceService (地點資訊處理)
├─ JourneyService (行程管理)
└─ JourneyDataService (行程資料處理)

資料持久層 (Persistence Layer)
├─ 地點資訊管理子系統
├─ 使用者管理子系統
├─ 偏好設定子系統
└─ 行程管理子系統
```

## 🛠️ 技術棧

- **後端框架:** Flask (Python)
- **資料庫:** MariaDB
- **模板引擎:** Jinja2
- **前端框架:** Bootstrap 5
- **外部API:** 
  - Google Places API (Nearby Search, Place Details)
  - Google Routes API
- **演算法庫:** DEAP (Distributed Evolutionary Algorithms in Python)

## 📊 資料庫設計

系統資料庫分為四大子系統:

1. **地點資訊管理** - 儲存景點詳細資訊、營業時間、關鍵字等
2. **使用者管理** - 管理使用者帳號、偏好、行程關聯
3. **偏好設定** - 儲存旅遊偏好(預算、時間、關鍵字等)
4. **行程管理** - 記錄生成的行程及景點順序

## 🚀 主要功能

### 使用者功能
- 註冊/登入系統
- 填寫旅遊偏好(縣市、時間、預算、景點類型等)
- 調整權重(預算、評價星數、評價數量)
- 查看生成的行程規劃結果

### 系統功能
- 自動篩選符合條件的景點
- 考量營業時間的智能排程
- 多目標最佳化行程規劃
- 路線規劃與時間估算
- 行程結果視覺化展示

## 🔄 遺傳算子操作

### 交叉操作
- 單點交叉 (SPX)
- 兩點交叉 (TPX)
- 均勻交叉 (Uniform Crossover)
- 有序交叉 (OX)
- 部分映射交叉 (PMX)

### 突變操作
- 點突變 (Point Mutation)
- 插入突變 (Insert Mutation)
- 刪除突變 (Delete Mutation)

## 📈 系統優勢

1. **基於網頁設計** - 無需下載安裝,提升使用便利性
2. **全自動規劃** - 自動選點與排程,節省使用者時間
3. **多目標考量** - 平衡多個衝突目標,提供帕累托最優解
4. **時間合理性檢查** - 確保景點拜訪時間符合營業時間
5. **模組化架構** - 易於維護與擴展
6. **環境永續** - 鼓勵使用大眾運輸,降低碳排放

## 📝 研究貢獻

- 首創考量景點營業時間的自動旅遊規劃系統
- 結合多種策略生成高品質初始群集
- 完整的多目標最佳化旅遊規劃解決方案
- 實現前後端分離的可維護架構

## 🔗 相關資源

主要參考技術與演算法:
- NSGA-II 演算法
- 旅行商問題 (TSP)
- 帕累托最佳化 (Pareto Optimality)
- 遺傳演算法 (Genetic Algorithm)

---

**關鍵字:** 旅遊排程、全端設計、GA、Pareto、NSGA-II、Flask、MariaDB
